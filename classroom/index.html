<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
      <title>Teach Online - Classroom</title>
      <meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1">

      <!-- Favicon -->
        <link rel="icon" type="image/png" href="//wbweb.co.in/assets/images/favicon.png">

      <!-- Onpage SEO -->
        <meta name="title" content="">
        <meta name="keyword" content="">
        <meta name="description" content="">

      <!-- Dependencies -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@9/dist/sweetalert2.min.css" id="theme-styles">
        <link rel="stylesheet" href="../main.css">
  </head>
  <body>
    <div class="container">
      <div id="app">

      </div>
    </div>
    <footer>
      <button id="sign-in-or-out-button"
              style="margin-left: 25px">Sign In/Authorize</button>
      <button id="revoke-access-button"
              style="display: none; margin-left: 25px">Revoke access</button>
    </footer>
    <div class="modalspin"><!-- Pre-Loader --></div>
  </body>
    <!-- General Dependencies -->
    <script src="https://www.chartjs.org/dist/2.9.3/Chart.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" ></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9/dist/sweetalert2.min.js"></script>
    <script src="https://apis.google.com/js/platform.js"></script>
    <script src="https://apis.google.com/js/api.js">
    </script>
    <script src="auth.js"></script>
    <script src="../config.js"></script>
    <script src="app.js"></script>

    <!-- Classroom Dependencies -->
    <script src="js/courses.js"></script>
    <script src="js/courses.students.js"></script>
    <script src="js/courses.announcements.js"></script>
    <script src="js/courses.courseWork.js"></script>
    <script src="js/courses.courseWork.studentSubmissions.js"></script>
    <script src="js/courses.teachers.js"></script>
    <script src="js/courses.topic.js"></script>
    <script src="js/courses.aliases.js"></script>

    <script src="js/invitations.js"></script>
    <script src="js/userprofiles.js"></script>

    <script src="js/userprofiles.guardians.js"></script>
    <script src="js/userprofiles.guardianinvitations.js"></script>

    <script>
      function startApp() {
        return gapi.client.classroom.courses.list({})
        .then(function(response) {
          // Handle the results here (response.result has the parsed body).
          console.log("Response", response);

          console.log('dom call int');

          //get DOM of courses
          print=coursesDOM(response.result.courses);

          console.log('dom call complete');

          //print courses in page
          $('#app').html(print);

        },
        function(err) { console.error("Execute error", err); });
      }

      function coursesDOM(courses) {
        console.log('dom call success');
        print='<div class="row">';
          for(i=0; i<courses.length; i++){
            console.log(courses[i]);
              if (courses[i].state=="ACTIVE") {
                bg='primary';
              } else if (courses[i].state=="NOT_ASSIGNED") {
                bg='warning';
              } else {
                bg='danger';
              }

              print+='<div class="col-md-3"><div class="card text-white bg-'+bg+' mb-3" style="max-width: 18rem;">'
               +'<div class="card-header">'+courses[i].name+' - '+courses[i].section+' - ['+courses[i].enrollmentCode+']</div>'
               +'<div class="card-body">'
               +'<h5 class="card-title">'+courses[i].descriptionHeading+'</h5>'
               +'<a href="'+courses[i].alternateLink+'" class="card-text">Classroom Link</a><br>'
              // +'<a href="'+courses[i].teacherFolder.alternateLink+'" class="card-text">Drive Link</a><br>'
               +'<a href="'+courses[i].calendarId+'" class="card-text">Calendar Link</a><br>'
               +'</div>'
               +'</div></div>';
            }
        print+='</div>';

        return print;
      }

      handleClientLoad();

    </script>

</html>
